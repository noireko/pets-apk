<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¶ Pets ğŸ˜º</title>
    <link href="css/styles.css" rel="stylesheet">
    <script type="module">
  // Importar librerÃ­as Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";

  // ConfiguraciÃ³n (ponÃ© tu firebaseConfig acÃ¡)
  const firebaseConfig = {
    apiKey: "AIzaSyANv0XWH-kAOUXoM2YVd9vZJQt0_gofCRw",
    authDomain: "comida-mascotas.firebaseapp.com",
    projectId: "comida-mascotas",
    storageBucket: "comida-mascotas.firebasestorage.app",
    messagingSenderId: "944331542460",
    appId: "1:944331542460:web:23937b5e25c566b0f5e5b9",
    measurementId: "G-VWXSP9DZL0"
  };

  // Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  // -----------------------
  // LÃ³gica para checkboxes
  // -----------------------
  const checkboxes = document.querySelectorAll("input[type='checkbox']");
  const botonGuardar = document.querySelector(".seccion-boton button");

  // Escuchar cambios en tiempo real desde Firebase
  const dbRef = ref(db, "mascotas");
  onValue(dbRef, (snapshot) => {
    const data = snapshot.val() || {};
    checkboxes.forEach((cb, index) => {
      cb.checked = data[index] || false;
    });
  });

  // Guardar en Firebase al hacer clic en Guardar
  botonGuardar.addEventListener("click", (e) => {
    e.preventDefault();
    let estados = {};
    checkboxes.forEach((cb, index) => {
      estados[index] = cb.checked;
    });
    set(dbRef, estados);
  });
</script>
</head>
<body>
    <main>
        <section>
            <div>
                <h1>Â¿Â¿Los bichos comieron??</h1>
            </div>
        </section>
        <section class="seccion-animalitos">
            <div>
                <img class="sven" src="img/sven.jpeg">
                <form>
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </form>
            </div>
            <div>
                <img class="ponyo" src="img/ponyo.jpeg">
                <form>
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </form>
            </div>
            <div>
                <img class="haku" src="img/haku.jpeg">
                <form>
                    <input type="checkbox">
                    <input type="checkbox">
                    <input type="checkbox">
                </form>
            </div>
        </section>
        <section class="seccion-boton" id="boton">
            <button>Guardar</button>
        </section>
    </main>
    <script src="js/javascript.js"></script>
</body>
</html>